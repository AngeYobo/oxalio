{"openapi":"3.0.1","info":{"title":"Oxalio Terne Device Service API","description":"Terminal enrollment, commands and locations (audit-ready).","contact":{"name":"Oxalio Labs","email":"support@oxaliolabs.io"},"license":{"name":"Proprietary"},"version":"1.0.0"},"servers":[{"url":"http://localhost:8086","description":"Generated server url"}],"tags":[{"name":"Terminals","description":"Terminal enrollment & lifecycle"},{"name":"Locations","description":"Terminal location ingestion & lookup"},{"name":"Commands","description":"Terminal commands & heartbeat"}],"paths":{"/api/v1/terne/terminals":{"get":{"tags":["Terminals"],"operationId":"list","parameters":[{"name":"tenantId","in":"query","required":false,"schema":{"type":"string","format":"uuid"}},{"name":"posId","in":"query","required":false,"schema":{"type":"string","format":"uuid"}},{"name":"status","in":"query","required":false,"schema":{"type":"string","enum":["ENROLLED","ACTIVE","SUSPENDED","RETIRED"]}},{"name":"X-Correlation-Id","in":"header","description":"Correlation identifier for end-to-end tracing (recommended).","required":false,"schema":{"type":"string","example":"corr-20260208-123456"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TerminalResponse"}}}}}}},"post":{"tags":["Terminals"],"operationId":"enroll","parameters":[{"name":"X-Correlation-Id","in":"header","description":"Correlation identifier for end-to-end tracing (recommended).","required":false,"schema":{"type":"string","example":"corr-20260208-123456"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TerminalEnrollRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TerminalResponse"}}}}}}},"/api/v1/terne/terminals/{terminalId}/suspend":{"post":{"tags":["Terminals"],"operationId":"suspend","parameters":[{"name":"terminalId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"X-Correlation-Id","in":"header","description":"Correlation identifier for end-to-end tracing (recommended).","required":false,"schema":{"type":"string","example":"corr-20260208-123456"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TerminalResponse"}}}}}}},"/api/v1/terne/terminals/{terminalId}/locations":{"get":{"tags":["Locations"],"operationId":"history","parameters":[{"name":"terminalId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"from","in":"query","required":false,"schema":{"type":"string","format":"date-time"}},{"name":"to","in":"query","required":false,"schema":{"type":"string","format":"date-time"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":100}},{"name":"X-Correlation-Id","in":"header","description":"Correlation identifier for end-to-end tracing (recommended).","required":false,"schema":{"type":"string","example":"corr-20260208-123456"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TerminalLocationResponse"}}}}}}},"post":{"tags":["Locations"],"operationId":"ingest","parameters":[{"name":"terminalId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"X-Correlation-Id","in":"header","description":"Correlation identifier for end-to-end tracing (recommended).","required":false,"schema":{"type":"string","example":"corr-20260208-123456"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TerminalLocationIngestRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TerminalLocationResponse"}}}}}}},"/api/v1/terne/terminals/{terminalId}/heartbeat":{"post":{"tags":["Commands"],"operationId":"heartbeat","parameters":[{"name":"terminalId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"X-Correlation-Id","in":"header","description":"Correlation identifier for end-to-end tracing (recommended).","required":false,"schema":{"type":"string","example":"corr-20260208-123456"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TerminalHeartbeatRequest"}}},"required":true},"responses":{"200":{"description":"OK"}}}},"/api/v1/terne/terminals/{terminalId}/commands":{"get":{"tags":["Commands"],"operationId":"listCommands","parameters":[{"name":"terminalId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"status","in":"query","required":false,"schema":{"type":"string","enum":["QUEUED","ACKED","RUNNING","SUCCEEDED","FAILED","CANCELED"]}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":50}},{"name":"X-Correlation-Id","in":"header","description":"Correlation identifier for end-to-end tracing (recommended).","required":false,"schema":{"type":"string","example":"corr-20260208-123456"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TerminalCommandResponse"}}}}}}},"post":{"tags":["Commands"],"operationId":"createCommand","parameters":[{"name":"terminalId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"X-Correlation-Id","in":"header","description":"Correlation identifier for end-to-end tracing (recommended).","required":false,"schema":{"type":"string","example":"corr-20260208-123456"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TerminalCommandCreateRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TerminalCommandResponse"}}}}}}},"/api/v1/terne/terminals/{terminalId}/activate":{"post":{"tags":["Terminals"],"operationId":"activate","parameters":[{"name":"terminalId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"X-Correlation-Id","in":"header","description":"Correlation identifier for end-to-end tracing (recommended).","required":false,"schema":{"type":"string","example":"corr-20260208-123456"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TerminalResponse"}}}}}}},"/api/v1/terne/terminals/{terminalId}":{"get":{"tags":["Terminals"],"operationId":"get","parameters":[{"name":"terminalId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"X-Correlation-Id","in":"header","description":"Correlation identifier for end-to-end tracing (recommended).","required":false,"schema":{"type":"string","example":"corr-20260208-123456"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TerminalResponse"}}}}}},"patch":{"tags":["Terminals"],"operationId":"update","parameters":[{"name":"terminalId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"X-Correlation-Id","in":"header","description":"Correlation identifier for end-to-end tracing (recommended).","required":false,"schema":{"type":"string","example":"corr-20260208-123456"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TerminalUpdateRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TerminalResponse"}}}}}}},"/api/v1/terne/commands/{commandId}":{"patch":{"tags":["Commands"],"operationId":"updateCommand","parameters":[{"name":"commandId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"X-Correlation-Id","in":"header","description":"Correlation identifier for end-to-end tracing (recommended).","required":false,"schema":{"type":"string","example":"corr-20260208-123456"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TerminalCommandUpdateRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TerminalCommandResponse"}}}}}}},"/api/v1/terne/terminals/{terminalId}/location/latest":{"get":{"tags":["Locations"],"operationId":"latest","parameters":[{"name":"terminalId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"X-Correlation-Id","in":"header","description":"Correlation identifier for end-to-end tracing (recommended).","required":false,"schema":{"type":"string","example":"corr-20260208-123456"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TerminalLocationResponse"}}}}}}}},"components":{"schemas":{"TerminalEnrollRequest":{"required":["manufacturer","model","osVersion","serialNumber","tenantId"],"type":"object","properties":{"tenantId":{"type":"string","format":"uuid"},"posId":{"type":"string","format":"uuid"},"serialNumber":{"maxLength":64,"minLength":0,"type":"string"},"imei":{"maxLength":32,"minLength":0,"type":"string"},"manufacturer":{"maxLength":80,"minLength":0,"type":"string"},"model":{"maxLength":80,"minLength":0,"type":"string"},"osVersion":{"maxLength":32,"minLength":0,"type":"string"},"appVersion":{"maxLength":32,"minLength":0,"type":"string"},"mdmProvider":{"maxLength":50,"minLength":0,"type":"string"},"mdmDeviceId":{"maxLength":100,"minLength":0,"type":"string"},"tags":{"type":"array","items":{"type":"string"}}}},"TerminalResponse":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"tenantId":{"type":"string","format":"uuid"},"posId":{"type":"string","format":"uuid"},"status":{"type":"string","enum":["ENROLLED","ACTIVE","SUSPENDED","RETIRED"]},"serialNumber":{"type":"string"},"imei":{"type":"string"},"manufacturer":{"type":"string"},"model":{"type":"string"},"osVersion":{"type":"string"},"appVersion":{"type":"string"},"mdmProvider":{"type":"string"},"mdmDeviceId":{"type":"string"},"tags":{"type":"array","items":{"type":"string"}},"lastSeenAt":{"type":"string","format":"date-time"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"TerminalLocationIngestRequest":{"required":["capturedAt","source"],"type":"object","properties":{"capturedAt":{"type":"string","format":"date-time"},"source":{"type":"string","enum":["MDM","DEVICE_AGENT","MANUAL"]},"latitude":{"maximum":90.0,"exclusiveMaximum":false,"minimum":-90.0,"exclusiveMinimum":false,"type":"number","format":"double"},"longitude":{"maximum":180.0,"exclusiveMaximum":false,"minimum":-180.0,"exclusiveMinimum":false,"type":"number","format":"double"},"accuracyMeters":{"type":"number","format":"double"},"provider":{"maxLength":50,"minLength":0,"type":"string"}}},"TerminalLocationResponse":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"terminalId":{"type":"string","format":"uuid"},"capturedAt":{"type":"string","format":"date-time"},"source":{"type":"string","enum":["MDM","DEVICE_AGENT","MANUAL"]},"latitude":{"type":"number","format":"double"},"longitude":{"type":"number","format":"double"},"accuracyMeters":{"type":"number","format":"double"},"provider":{"type":"string"},"createdAt":{"type":"string","format":"date-time"}}},"TerminalHeartbeatRequest":{"type":"object","properties":{"capturedAt":{"type":"string","format":"date-time"},"ipAddress":{"type":"string"},"networkType":{"type":"string","enum":["WIFI","CELLULAR_2G","CELLULAR_3G","CELLULAR_4G","CELLULAR_5G","ETHERNET","UNKNOWN"]},"batteryPct":{"maximum":100,"minimum":0,"type":"integer","format":"int32"},"charging":{"type":"boolean"},"appVersion":{"type":"string"},"osVersion":{"type":"string"},"mdmCompliant":{"type":"boolean"},"payload":{"type":"object","additionalProperties":{"type":"object"}}}},"TerminalCommandCreateRequest":{"required":["type"],"type":"object","properties":{"type":{"type":"string","enum":["LOCK","WIPE","RESTART_DEVICE","RESTART_APP","SYNC_CONFIG","PUSH_APP_UPDATE"]},"payload":{"type":"object","additionalProperties":{"type":"object"}},"requestedBy":{"maxLength":120,"minLength":0,"type":"string"}}},"TerminalCommandResponse":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"terminalId":{"type":"string","format":"uuid"},"commandType":{"type":"string","enum":["LOCK","WIPE","RESTART_DEVICE","RESTART_APP","SYNC_CONFIG","PUSH_APP_UPDATE"]},"status":{"type":"string","enum":["QUEUED","ACKED","RUNNING","SUCCEEDED","FAILED","CANCELED"]},"payload":{"type":"object","additionalProperties":{"type":"object"}},"requestedBy":{"type":"string"},"acknowledgedAt":{"type":"string","format":"date-time"},"completedAt":{"type":"string","format":"date-time"},"errorCode":{"type":"string"},"errorMessage":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"TerminalUpdateRequest":{"type":"object","properties":{"tenantId":{"type":"string","format":"uuid"},"posId":{"type":"string","format":"uuid"},"mdmProvider":{"maxLength":50,"minLength":0,"type":"string"},"mdmDeviceId":{"maxLength":100,"minLength":0,"type":"string"},"appVersion":{"maxLength":32,"minLength":0,"type":"string"},"tags":{"type":"array","items":{"type":"string"}}}},"TerminalCommandUpdateRequest":{"required":["status"],"type":"object","properties":{"status":{"type":"string","enum":["QUEUED","ACKED","RUNNING","SUCCEEDED","FAILED","CANCELED"]},"acknowledgedAt":{"type":"string","format":"date-time"},"completedAt":{"type":"string","format":"date-time"},"errorCode":{"maxLength":80,"minLength":0,"type":"string"},"errorMessage":{"maxLength":1000,"minLength":0,"type":"string"}}}},"securitySchemes":{"apiKeyAuth":{"type":"apiKey","description":"API Key authentication (when enabled).","name":"X-Api-Key","in":"header"},"bearerAuth":{"type":"http","description":"Bearer JWT authentication (when enabled).","scheme":"bearer","bearerFormat":"JWT"}}}}